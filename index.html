<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="yvanliUpdagre">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="yvanliUpdagre">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="yvanli">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>yvanliUpdagre</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">yvanliUpdagre</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">专注提升</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/%20" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/02/04/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/02/04/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E8%B0%83%E5%BA%A6%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" itemprop="url">调度系统设计读书笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-02-04T19:49:06+08:00">
                2020-02-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="调度系统设计精要"><a href="#调度系统设计精要" class="headerlink" title="调度系统设计精要"></a>调度系统设计精要</h3><p><a href="https://mp.weixin.qq.com/s/jI2ruzGLZRJmf9H49z3ojA" target="_blank" rel="noopener">原文链接:调度系统设计</a></p>
<p>调度系统解决的就是资源和需求供给不平衡的问题。</p>
<h4 id="需求调研"><a href="#需求调研" class="headerlink" title="需求调研"></a>需求调研</h4><ol>
<li>调研应用场景，深入调研场景中待执行的任务（work）和能用来执行任务的资源）（resource）的特性。</li>
<li>分析调度系统的目的，成本优先，质量优先，最大化资源利用率等等</li>
</ol>
<h4 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h4><p>了解任务的特性：</p>
<ol>
<li>任务是否有截至日期，必须在某个时间以前完成；</li>
<li>任务是否支持抢占，抢占的具体规则是什么；</li>
<li>任务是否包含前置条件；</li>
<li>任务是否能在制定的资源上运行；</li>
</ol>
<p>复杂性在于资源可能不平衡，不同资源处理任务的速度可能不一致。</p>
<h6 id="linux调度例子"><a href="#linux调度例子" class="headerlink" title="linux调度例子"></a>linux调度例子</h6><p>linux的进程调度器中，待调度的就是线程，线程只会处于执行或未执行状态。资源就是cpu（除cpu外系统不会为线程分配内存），同一个cpu在同一时间只能执行一个任务（进程中的线程），分配cpu时间给进程 ，上下文切换</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/18/leetcode/673-NumberofLongestIncreasingSubsequence/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/18/leetcode/673-NumberofLongestIncreasingSubsequence/" itemprop="url">673-NumberofLongestIncreasingSubsequence</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-18T13:59:39+08:00">
                2020-01-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">func findNumberOfLIS(nums []int) int &#123;</span><br><span class="line">	//DP[j] = max(DP[j],DP[i]+1) 0&lt;i&lt;j <span class="keyword">if</span> nums[j]&gt;nums[i]</span><br><span class="line">	//numsLen[j]  以j为结尾的最长递增序列的长度</span><br><span class="line">	<span class="keyword">if</span> len(nums) == 0&#123;</span><br><span class="line">		<span class="built_in">return</span>  0</span><br><span class="line">	&#125;</span><br><span class="line">	dp := make([]int,len(nums))</span><br><span class="line">	numsLen := make([]int,len(nums))</span><br><span class="line">	maxLen := 0</span><br><span class="line">	<span class="keyword">for</span> i := 0 ;i &lt;len(dp);i++&#123;</span><br><span class="line">		dp[i] = 1</span><br><span class="line">		numsLen[i] = 1</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> i:=0;i&lt;len(nums);i++&#123;</span><br><span class="line">		<span class="keyword">for</span> j:=0;j&lt;i;j++&#123;</span><br><span class="line">			<span class="keyword">if</span> nums[i] &gt;nums[j] &#123;</span><br><span class="line">				// 更新最大长度，把之前的排列加起来</span><br><span class="line">				<span class="keyword">if</span>  dp[j] + 1 &gt; dp[i] &#123;</span><br><span class="line">					numsLen[i] = numsLen[j]</span><br><span class="line">					dp[i] = dp[j]+1</span><br><span class="line">				&#125;<span class="keyword">else</span> <span class="keyword">if</span> dp[j] +1 == dp[i]&#123;</span><br><span class="line">					numsLen[i] += numsLen[j]</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> maxLen &lt; dp[i] &#123;</span><br><span class="line">			maxLen = dp[i]</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	ret := 0</span><br><span class="line">	<span class="keyword">for</span> i := 0;i&lt;len(nums);i++&#123;</span><br><span class="line">		<span class="keyword">if</span> maxLen == dp[i] &#123;</span><br><span class="line">			ret += numsLen[i]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> ret</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func Max(a,b int) int &#123;</span><br><span class="line">	<span class="keyword">if</span> a&gt;b&#123;</span><br><span class="line">		<span class="built_in">return</span>  a</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/17/leetcode/34-SearchRange/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/17/leetcode/34-SearchRange/" itemprop="url">34SearchRange</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-17T17:33:27+08:00">
                2020-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="34-SearchRange"><a href="#34-SearchRange" class="headerlink" title="34-SearchRange"></a>34-SearchRange</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Given an array of integers nums sorted <span class="keyword">in</span> ascending order, find the starting and ending position of a given target value.</span><br><span class="line"></span><br><span class="line">Your algorithm<span class="string">'s runtime complexity must be in the order of O(log n).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">If the target is not found in the array, return [-1, -1].</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example 1:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Input: nums = [5,7,7,8,8,10], target = 8</span></span><br><span class="line"><span class="string">Output: [3,4]</span></span><br><span class="line"><span class="string">Example 2:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Input: nums = [5,7,7,8,8,10], target = 6</span></span><br><span class="line"><span class="string">Output: [-1,-1]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">来源：力扣（LeetCode）</span></span><br><span class="line"><span class="string">链接：https://leetcode-cn.com/problems/find-first-and-last-position-of-element-in-sorted-array</span></span><br><span class="line"><span class="string">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span></span><br></pre></td></tr></table></figure>

<h3 id="方法1"><a href="#方法1" class="headerlink" title="方法1"></a>方法1</h3><p>分别找到最左端和最右端,正常二分查找找到值直接返回，这里我们只需要对=情况区分处理，<br>找最左的时候如果发现目标相等，移动右指针，使得左右相等（循环推出）的情况逼近最左值<br>找右的时候正好相反</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">func searchRange(nums []int, target int) []int &#123;</span><br><span class="line">	left :=binaryLeftSerach(nums,target)</span><br><span class="line">	right :=binaryRightSerach(nums,target)</span><br><span class="line">	<span class="built_in">return</span> []int&#123;left,right&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func binaryLeftSerach(nums[]int ,target int ) int &#123;</span><br><span class="line">	lenN := len(nums)</span><br><span class="line">	<span class="keyword">if</span> lenN ==0 &#123;</span><br><span class="line">		<span class="built_in">return</span> -1</span><br><span class="line">	&#125;</span><br><span class="line">	right,left,mid := lenN,0,0</span><br><span class="line">	//开区间[0,n) 左闭右开所以左边要+1 右边不处理，相等的时候右边动往地位走，left和right一点点逼近最左值，</span><br><span class="line">	// 极限条件是left=lenN才能退出循环，所以判断下极限条件 当然如果right=lenN-1可不用判断</span><br><span class="line">	<span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">		mid = (left +right) /2</span><br><span class="line">		<span class="keyword">if</span> nums[mid] &lt; target&#123;</span><br><span class="line">			left = mid+1</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			right = mid</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> left == lenN&#123;</span><br><span class="line">		<span class="built_in">return</span> -1</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> nums[left] ==target &#123;</span><br><span class="line">		<span class="built_in">return</span> left</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span>  -1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func binaryRightSerach(nums[]int ,target int ) int &#123;</span><br><span class="line">	lenN := len(nums)</span><br><span class="line">	<span class="keyword">if</span> lenN ==0 &#123;</span><br><span class="line">		<span class="built_in">return</span> -1</span><br><span class="line">	&#125;</span><br><span class="line">	right,left,mid := lenN,0,0</span><br><span class="line">	//开区间[0,n) 左闭右开所以左边要+1 右边不处理，相等的时候左边动往高位走，left和right一点点逼近最有右值，</span><br><span class="line">	// 极限条件是left=lenN才能退出循环，所以判断下极限条件 当然如果right=lenN-1可不用判断</span><br><span class="line">	<span class="keyword">for</span> left &lt; right &#123;</span><br><span class="line">		mid = (left +right) /2</span><br><span class="line">		/*</span><br><span class="line">		<span class="keyword">if</span> nums[mid] == target&#123;</span><br><span class="line">			left = mid + 1</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span> nums[mid] &gt; target&#123;</span><br><span class="line">			right = mid</span><br><span class="line">		&#125;<span class="keyword">else</span> <span class="keyword">if</span> nums[mid] &lt; target&#123;</span><br><span class="line">			left = mid + 1</span><br><span class="line">		&#125;</span><br><span class="line">		*/</span><br><span class="line">		<span class="keyword">if</span> nums[mid] &gt; target&#123;</span><br><span class="line">			right = mid</span><br><span class="line">		&#125; <span class="keyword">else</span>&#123;</span><br><span class="line">			left = mid + 1</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> right - 1 &lt; 0 &#123;</span><br><span class="line">		<span class="built_in">return</span> -1</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> nums[right-1] == target&#123;</span><br><span class="line">		<span class="built_in">return</span> right-1</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span>  -1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="放在一个函数方法"><a href="#放在一个函数方法" class="headerlink" title="放在一个函数方法"></a>放在一个函数方法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">func searchRangeV2(nums []int, target int) []int &#123;</span><br><span class="line">	l, r := 0, len(nums)-1</span><br><span class="line">	<span class="keyword">if</span> r &lt; 0 &#123;</span><br><span class="line">		<span class="built_in">return</span> []int&#123;-1, -1&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	//找左边界，所以右边界=或&gt;target都收缩右边界，当l=r的时候就是左边界</span><br><span class="line">	<span class="keyword">for</span> l &lt; r &#123;</span><br><span class="line">		mid := (l + r) / 2</span><br><span class="line">		<span class="keyword">if</span> nums[mid] &lt; target &#123;</span><br><span class="line">			l = mid + 1</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			r = mid</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	res1 := l</span><br><span class="line">	l, r = 0, len(nums)-1</span><br><span class="line">	<span class="keyword">for</span> l &lt; r &#123;</span><br><span class="line">		mid := (l+r)/2 + 1</span><br><span class="line">		<span class="keyword">if</span> nums[mid] &gt; target &#123;</span><br><span class="line">			r = mid - 1</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			l = mid</span><br><span class="line">		&#125;</span><br><span class="line">		fmt.Println(l, r)</span><br><span class="line">	&#125;</span><br><span class="line">	res2 := l</span><br><span class="line">	<span class="keyword">if</span> nums[res1] != target &#123;</span><br><span class="line">		<span class="built_in">return</span> []int&#123;-1, -1&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">return</span> []int&#123;res1, res2&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/12/leetcode/236-LowestCommonAncestorofaBinaryTree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/12/leetcode/236-LowestCommonAncestorofaBinaryTree/" itemprop="url">236-LowestCommonAncestorofaBinaryTree</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-12T12:16:35+08:00">
                2020-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="236-Lowest-Common-Ancestor-of-a-Binary-Tree"><a href="#236-Lowest-Common-Ancestor-of-a-Binary-Tree" class="headerlink" title="236. Lowest Common Ancestor of a Binary Tree"></a>236. Lowest Common Ancestor of a Binary Tree</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Given a binary tree, find the lowest common ancestor (LCA) of two given nodes <span class="keyword">in</span> the tree.</span><br><span class="line"></span><br><span class="line">According to the definition of LCA on Wikipedia: “The lowest common ancestor is defined between two nodes p and q as the lowest node <span class="keyword">in</span> T that has both p and q as descendants (<span class="built_in">where</span> we allow a node to be a descendant of itself).”</span><br><span class="line"></span><br><span class="line">Given the following binary tree:  root = [3,5,1,6,2,0,8,null,null,7,4]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Example 1:</span><br><span class="line"></span><br><span class="line">Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: The LCA of nodes 5 and 1 is 3.</span><br><span class="line">Example 2:</span><br><span class="line"></span><br><span class="line">Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4</span><br><span class="line">Output: 5</span><br><span class="line">Explanation: The LCA of nodes 5 and 4 is 5, since a node can be a descendant of itself according to the LCA definition.</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Note:</span><br><span class="line"></span><br><span class="line">All of the nodes<span class="string">' values will be unique.</span></span><br><span class="line"><span class="string">p and q are different and both values will exist in the binary tree.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">来源：力扣（LeetCode）</span></span><br><span class="line"><span class="string">链接：https://leetcode-cn.com/problems/lowest-common-ancestor-of-a-binary-tree</span></span><br><span class="line"><span class="string">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span></span><br></pre></td></tr></table></figure>
<h4 id="思路如下："><a href="#思路如下：" class="headerlink" title="思路如下："></a>思路如下：</h4><p>要记住两个点，从跟节点到目标节点p，q 因该是root-&gt;<em>-&gt;</em>…(一直都是单节点)，到最近父节点分拆分别指向p，q(p,q相等除外)<br>所以要找的节点有以下特点：</p>
<ol>
<li>前面都是单路径只有，只有目标节点在其自身或子树下有能左右两个正确返回</li>
<li>root到p，q的路径上，到最进夫节点分叉节点</li>
<li>如果使用中序遍历，p，q之间的结果节点应该是中序遍历中节点最浅的节点<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Definition <span class="keyword">for</span> TreeNode.</span><br><span class="line"> * <span class="built_in">type</span> TreeNode struct &#123;</span><br><span class="line"> *     Val int</span><br><span class="line"> *     Left *ListNode</span><br><span class="line"> *     Right *ListNode</span><br><span class="line"> * &#125;</span><br><span class="line"> */</span><br><span class="line"> package main</span><br><span class="line"></span><br><span class="line"> //初始化_ans以防未找到空指针</span><br><span class="line"> var _ans *TreeNode =&amp;TreeNode&#123;&#125;</span><br><span class="line"></span><br><span class="line"> func lowestCommonAncestor(root, p, q *TreeNode) *TreeNode &#123;</span><br><span class="line">	RecursionAns(root,p,q)</span><br><span class="line">    <span class="built_in">return</span> _ans</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//递归</span><br><span class="line">//由于是二叉树，只有一个节点的子节点能包含两个节点，该节点的父节点只能有左节点有或右节点有搜索节点</span><br><span class="line">func RecursionAns(node,p,q *TreeNode) bool&#123;</span><br><span class="line">	ret := <span class="literal">false</span></span><br><span class="line">	<span class="keyword">if</span> node ==nil &#123;</span><br><span class="line">		<span class="built_in">return</span> <span class="literal">false</span></span><br><span class="line">	&#125;</span><br><span class="line">	mid ,left,right := 0,0,0</span><br><span class="line">	<span class="keyword">if</span> RecursionAns(node.Left,p,q) &#123;</span><br><span class="line">		left = 1</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> RecursionAns(node.Right,p,q) &#123;</span><br><span class="line">		right = 1</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> node == p||node == q&#123;</span><br><span class="line">		mid = 1</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (mid + left + right) &gt; 1&#123;</span><br><span class="line">		 ret = <span class="literal">true</span></span><br><span class="line">	&#125;</span><br><span class="line">	//如果自己或者左右大于2证明找到该节点，由于是二叉树全局只有一个节点符合条件不知道能否体检结束</span><br><span class="line">	<span class="keyword">if</span> (mid + left +right) &gt;= 2&#123;</span><br><span class="line">		_ans = node</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/11/leetcode/221-MaximalSquare/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/11/leetcode/221-MaximalSquare/" itemprop="url">221-MaximalSquare</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-11T12:12:18+08:00">
                2020-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="221-MaximalSquare"><a href="#221-MaximalSquare" class="headerlink" title="221-MaximalSquare"></a>221-MaximalSquare</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Given a 2D binary matrix filled with 0<span class="string">'s and 1'</span>s, find the largest square containing only 1<span class="string">'s and return its area.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Input: </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1 0 1 0 0</span></span><br><span class="line"><span class="string">1 0 1 1 1</span></span><br><span class="line"><span class="string">1 1 1 1 1</span></span><br><span class="line"><span class="string">1 0 0 1 0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Output: 4</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">来源：力扣（LeetCode）</span></span><br><span class="line"><span class="string">链接：https://leetcode-cn.com/problems/maximal-square</span></span><br><span class="line"><span class="string">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span></span><br></pre></td></tr></table></figure>

<h3 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h3><p>可以想到当前节点如果能作为最大的正方形+1，那他上面一定是一个正方形，且形成的正方形，包含其上左右三个点，<br>所以以该点为底点的变成应该是上左右三点变长+1，dp如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">func maximalSquare(matrix [][]byte) int &#123;</span><br><span class="line">	//使用dp转移</span><br><span class="line">	//dp[i][j] = min(dp[i-1,j-1],dp[i-1],[j],dp[j]) +1</span><br><span class="line">	rows := len(matrix)</span><br><span class="line">	<span class="keyword">if</span> rows &lt;= 0 &#123;</span><br><span class="line">		<span class="built_in">return</span> 0</span><br><span class="line">	&#125;</span><br><span class="line">	cols:= len(matrix[0])</span><br><span class="line">	dp:= make([][]int,len(matrix))</span><br><span class="line">	len := 0</span><br><span class="line">	//初始化dp数组</span><br><span class="line">	<span class="keyword">for</span> i:=0;i&lt;rows;i++&#123;</span><br><span class="line">		dp[i] = make([]int,cols)</span><br><span class="line">		<span class="keyword">for</span> j :=0 ;j&lt;cols;j++&#123;</span><br><span class="line">			<span class="keyword">if</span> matrix[i][j] == <span class="string">'1'</span> &#123;</span><br><span class="line">				<span class="keyword">if</span> i==0||j==0 &#123;</span><br><span class="line">					dp[i][j] = 1</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					dp[i][j] = min(dp[i-1][j-1],dp[i-1][j],dp[i][j-1]) +1</span><br><span class="line">				&#125;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">				dp[i][j]=0</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> dp[i][j] &gt; len&#123;</span><br><span class="line">				len = dp[i][j]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> len *len</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/11/leetcode/199-BinaryTreeRightSideView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/11/leetcode/199-BinaryTreeRightSideView/" itemprop="url">199-BinaryTreeRightSideView</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-11T11:56:14+08:00">
                2020-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="199-BinaryTreeRightSideView"><a href="#199-BinaryTreeRightSideView" class="headerlink" title="199-BinaryTreeRightSideView"></a>199-BinaryTreeRightSideView</h3><p>分析实际上就是，输出每层最右边的节点，<br>采用双数组存储当前层和上一层，交替上一层最后一个加入输出，同时弹出记录当前层，结束后当前层切换为上一层递归执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">func rightSideView(root *TreeNode) []int &#123;</span><br><span class="line">	//二叉树层次便利，返回每层最右边的</span><br><span class="line">	ret := make([]int,0)</span><br><span class="line">	<span class="keyword">if</span> root == nil &#123;</span><br><span class="line">		<span class="built_in">return</span> ret</span><br><span class="line">	&#125;</span><br><span class="line">	//lastLevelList</span><br><span class="line">	lastLevelList := make([]*TreeNode,0,100)</span><br><span class="line">	lastLevelList = append(lastLevelList,root)</span><br><span class="line">	//保证可弹出下一层</span><br><span class="line">	<span class="keyword">for</span> len(lastLevelList) != 0 &#123;</span><br><span class="line">		//addlastLevel lastnode</span><br><span class="line">		ret = append(ret,lastLevelList[len(lastLevelList)-1].Val)</span><br><span class="line">		nowLevelList := make([]*TreeNode,0,100)</span><br><span class="line">		//便利当前层把存储下一层</span><br><span class="line">		<span class="keyword">for</span> i := range lastLevelList&#123;</span><br><span class="line">			<span class="keyword">if</span> lastLevelList[i].Left !=nil&#123;</span><br><span class="line">				nowLevelList = append(nowLevelList,lastLevelList[i].Left)</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> lastLevelList[i].Right != nil&#123;</span><br><span class="line">				nowLevelList = append(nowLevelList,lastLevelList[i].Right)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		//当前层变成下一层</span><br><span class="line">		lastLevelList = nowLevelList</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> ret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/11/leetcode/114-FlattenBinaryTreetoLinkedList/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/11/leetcode/114-FlattenBinaryTreetoLinkedList/" itemprop="url">114-FlattenBinaryTreetoLinkedList</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-11T11:40:13+08:00">
                2020-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="114-FlattenBinaryTreetoLinkedList"><a href="#114-FlattenBinaryTreetoLinkedList" class="headerlink" title="114-FlattenBinaryTreetoLinkedList"></a>114-FlattenBinaryTreetoLinkedList</h3><h4 id="思路1-递归"><a href="#思路1-递归" class="headerlink" title="思路1-递归"></a>思路1-递归</h4><p>通过观察我们可以发现原地咱开就是，把左子树变空，右子树要么接到左子树的右边要么接到当前节点的右边<br>递归实现如下：<br><strong>bugfree 开心😄</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">func flattenRe(node *TreeNode) *TreeNode&#123;</span><br><span class="line">	<span class="keyword">if</span> node == nil&#123;</span><br><span class="line">		<span class="built_in">return</span> nil</span><br><span class="line">	&#125;</span><br><span class="line">	nodeLeft := flattenRe(node.Left)</span><br><span class="line">	nodeRight := flattenRe(node.Right)</span><br><span class="line">	tmp := nodeLeft</span><br><span class="line">	<span class="keyword">if</span> nodeLeft != nil&#123;</span><br><span class="line">		node.Right = nodeLeft</span><br><span class="line">		<span class="keyword">for</span> tmp.Right != nil &#123;</span><br><span class="line">			tmp = tmp.Right</span><br><span class="line">		&#125;</span><br><span class="line">		tmp.Right = nodeRight</span><br><span class="line">	&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">		node.Right = nodeRight</span><br><span class="line">	&#125;</span><br><span class="line">	node.Left = nil</span><br><span class="line">	<span class="built_in">return</span> node</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="思路二-非递归原地打开"><a href="#思路二-非递归原地打开" class="headerlink" title="思路二 非递归原地打开"></a>思路二 非递归原地打开</h4><p>处理完当前节点，把直接把指针知道当前节点的右节点上，由于当前节点所有子节点都被移到右节点了，所以不用盏就可以实现遍历</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">func flatten2 (root *TreeNode)&#123;</span><br><span class="line">	<span class="keyword">if</span> root == nil &#123;</span><br><span class="line">		<span class="built_in">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	var temp  *TreeNode</span><br><span class="line">	<span class="keyword">for</span> root != nil &#123;</span><br><span class="line">		<span class="keyword">if</span> root.Left != nil&#123;</span><br><span class="line">			temp = root.Left</span><br><span class="line">			<span class="keyword">for</span> temp.Right != nil &#123;</span><br><span class="line">				temp = temp.Right</span><br><span class="line">			&#125;</span><br><span class="line">			temp.Right = root.Right</span><br><span class="line">			root.Right = root.Left</span><br><span class="line">		&#125;</span><br><span class="line">		root = root.Right</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/11/leetcode/62%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/11/leetcode/62%E4%B8%8D%E5%90%8C%E8%B7%AF%E5%BE%84/" itemprop="url">62不同路径</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-11T11:33:04+08:00">
                2020-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="不同路径"><a href="#不同路径" class="headerlink" title="不同路径"></a>不同路径</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">一个机器人位于一个 m x n 网格的左上角 （起始点在下图中标记为“Start” ）。</span><br><span class="line"></span><br><span class="line">机器人每次只能向下或者向右移动一步。机器人试图达到网格的右下角（在下图中标记为“Finish”）。</span><br><span class="line"></span><br><span class="line">问总共有多少条不同的路径？</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例如，上图是一个7 x 3 的网格。有多少可能的路径？</span><br><span class="line"></span><br><span class="line">说明：m 和 n 的值均不超过 100。</span><br><span class="line"></span><br><span class="line">来源：力扣（LeetCode）</span><br><span class="line">链接：https://leetcode-cn.com/problems/unique-paths</span><br><span class="line">著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</span><br></pre></td></tr></table></figure>

<h3 id="解答"><a href="#解答" class="headerlink" title="解答"></a>解答</h3><p>本题压缩了空间，下一层的dp只依赖上一层和当层前一个元素所以不用保存，所有dp状态，只需要一层dp值和记录的当前值就好啦。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">func uniquePaths(m int, n int) int &#123;</span><br><span class="line">	//动态转移方程 F(m,n) = F(m,n-1)+F(m-1,n)\</span><br><span class="line">	//F(m,n) =1 (m=0||n=0)</span><br><span class="line">	fn := make([][]int,1)</span><br><span class="line">	fn[0]= make([]int,n)</span><br><span class="line">	pre := -1</span><br><span class="line">	<span class="keyword">for</span> i :=0;i&lt;m;i++&#123;</span><br><span class="line">		<span class="keyword">for</span> j:=0;j&lt;n;j++&#123;</span><br><span class="line">			<span class="keyword">if</span> i==0|| j==0&#123;</span><br><span class="line">				fn[0][j] = 1</span><br><span class="line">			&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">				fn[0][j] +=  pre</span><br><span class="line">			&#125;</span><br><span class="line">			pre = fn[0][j]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> fn[0][n-1]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/05/leetcode/leetcode-146LRUCache/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/05/leetcode/leetcode-146LRUCache/" itemprop="url">leetcode-146LRUCache</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-05T12:34:03+08:00">
                2020-01-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="LRU-Cahce-思路演进"><a href="#LRU-Cahce-思路演进" class="headerlink" title="LRU Cahce 思路演进"></a>LRU Cahce 思路演进</h3><h4 id="LRU第一版本思想"><a href="#LRU第一版本思想" class="headerlink" title="LRU第一版本思想"></a>LRU第一版本思想</h4><p><strong>头尾位独立处理实现复杂容易出错。</strong><br>采用map实现o(1)获取<br>使用双向链表控制LRU，一直有个用例不过<br>golang 实现如下：测试用例 12 / 18 个通过测试用例.<br>经过debug后发现为题判断如果是头指针和移除节点一致时处理除了问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> LRUCache struct &#123;</span><br><span class="line">    dataMap map[int]*ListDataNode</span><br><span class="line">    head *ListDataNode</span><br><span class="line">    tail *ListDataNode</span><br><span class="line">    capacity int</span><br><span class="line">    use int</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">type</span> ListDataNode struct&#123;</span><br><span class="line">    data  int</span><br><span class="line">    key   int</span><br><span class="line">    pre *ListDataNode</span><br><span class="line">    next *ListDataNode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func Constructor(capacity int) LRUCache &#123;</span><br><span class="line">    Cache :=LRUCache&#123;</span><br><span class="line">        dataMap :make(map[int]*ListDataNode,capacity),</span><br><span class="line">        head :nil,</span><br><span class="line">        tail :nil,</span><br><span class="line">        capacity: capacity,</span><br><span class="line">        use:0,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> Cache</span><br><span class="line">&#125;</span><br><span class="line">//取出操作的节点</span><br><span class="line">func (this *LRUCache) TakeOutNode( node *ListDataNode)&#123;</span><br><span class="line">    <span class="keyword">if</span> node.pre!=nil&#123;</span><br><span class="line">        node.pre.next = node.next</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> node.next !=nil&#123;</span><br><span class="line">        node.next.pre = node.pre</span><br><span class="line">    &#125;</span><br><span class="line">    //node 是尾节点，尾节点要前移动</span><br><span class="line">    <span class="keyword">if</span> node == this.tail&#123;</span><br><span class="line">        this.tail = node.pre</span><br><span class="line">    &#125;</span><br><span class="line">    /*</span><br><span class="line">    //node是头节点，头节点滞空</span><br><span class="line">    <span class="keyword">if</span> node == this.head&#123;</span><br><span class="line">        this.head = nil</span><br><span class="line">    &#125;</span><br><span class="line">    */</span><br><span class="line">    上面是错误的写法这里更正下,移除节点是头，并不意味着链表中没有头节点啦，所以这里不应应该直接指空</span><br><span class="line">    <span class="keyword">if</span> node == this.head&#123;</span><br><span class="line">        this.head = node.next</span><br><span class="line">    &#125;</span><br><span class="line">    //养成好习惯不用的指针处理掉</span><br><span class="line">    node.pre = nil</span><br><span class="line">    node.next = nil</span><br><span class="line">&#125;</span><br><span class="line">func (this *LRUCache) Get(key int) int &#123;</span><br><span class="line">    <span class="keyword">if</span> node ,ok := this.dataMap[key];ok&#123;</span><br><span class="line">        this.TakeOutNode(node)</span><br><span class="line">        this.AddHead(node)</span><br><span class="line">        <span class="built_in">return</span> node.data</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> -1    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//把刚操作的放在最前面</span><br><span class="line">func (this *LRUCache) Put(key int, value int)  &#123;</span><br><span class="line">    //检查是否存在，存在的直接更新值同时把节点移到head</span><br><span class="line">    <span class="keyword">if</span>  node ,ok := this.dataMap[key];ok&#123;</span><br><span class="line">		node.data = value</span><br><span class="line">        node.key = key</span><br><span class="line">        this.TakeOutNode(node)</span><br><span class="line">		this.AddHead(node)</span><br><span class="line">		<span class="built_in">return</span> </span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">if</span> this.use &gt;= this.capacity&#123;</span><br><span class="line">        //队列满了先去掉队列尾巴把再插入</span><br><span class="line">        this.DeleteTailNode()</span><br><span class="line">    &#125;</span><br><span class="line">    node := &amp;ListDataNode&#123;</span><br><span class="line">        data:value,</span><br><span class="line">        key:key,</span><br><span class="line">    &#125;</span><br><span class="line">    this.dataMap[key] = node</span><br><span class="line">    this.AddHead(node)</span><br><span class="line">    this.use++</span><br><span class="line">&#125;</span><br><span class="line">//把节点插入头里面</span><br><span class="line">func (this *LRUCache) AddHead(node *ListDataNode)&#123;</span><br><span class="line">        <span class="keyword">if</span> this.head == nil&#123;</span><br><span class="line">            this.head = node</span><br><span class="line">            this.tail = node</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            //把该节点放入队列头</span><br><span class="line">            tmp :=this.head</span><br><span class="line">            this.head = node</span><br><span class="line">            node.next = tmp</span><br><span class="line">            tmp.pre = node          </span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//删除尾部节点</span><br><span class="line">func (this *LRUCache)<span class="function"><span class="title">DeleteTailNode</span></span>()&#123;</span><br><span class="line">    //获取尾节点</span><br><span class="line">    <span class="keyword">if</span> this.tail == nil&#123;</span><br><span class="line">        <span class="built_in">return</span> </span><br><span class="line">    &#125;</span><br><span class="line">    key := this.tail.key</span><br><span class="line">    <span class="keyword">if</span> _,ok :=this.dataMap[key];ok&#123;</span><br><span class="line">        this.dataMap[key] = nil</span><br><span class="line">        delete(this.dataMap,key)</span><br><span class="line">        //从尾部节点拿掉</span><br><span class="line">        tmp := this.tail</span><br><span class="line">        this.tail = tmp.pre</span><br><span class="line">        <span class="keyword">if</span> tmp.pre !=nil&#123;</span><br><span class="line">            tmp.pre.next = nil</span><br><span class="line">        &#125;</span><br><span class="line">        this.use--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="LRU第二版本思想"><a href="#LRU第二版本思想" class="headerlink" title="LRU第二版本思想"></a>LRU第二版本思想</h4><p><strong>独立申请头尾哨兵节点，数据节点不在可能是头或尾部节点，插入和移除不用考虑过多情况实现简洁，不过在空间很小的情况下会多占两个节点可能空间会多O(2),但是带来的简洁性更高</strong></p>
<p>代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> LRUCache struct &#123;</span><br><span class="line">	dataMap map[int]*ListDataNode</span><br><span class="line">	head *ListDataNode</span><br><span class="line">	tail *ListDataNode</span><br><span class="line">	capacity int</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">type</span> ListDataNode struct&#123;</span><br><span class="line">	data  int</span><br><span class="line">	key   int</span><br><span class="line">	pre *ListDataNode</span><br><span class="line">	next *ListDataNode</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func Constructor(capacity int) LRUCache &#123;</span><br><span class="line">	head ,tail := new(ListDataNode),new(ListDataNode)</span><br><span class="line">    // 初始化cache 头尾相连作为哨兵，从头插入，从尾部移除</span><br><span class="line">	head.next = tail</span><br><span class="line">	tail.pre = head</span><br><span class="line">	head.next = tail</span><br><span class="line">	tail.pre = head</span><br><span class="line">	Cache :=LRUCache&#123;</span><br><span class="line">		dataMap :make(map[int]*ListDataNode,capacity),</span><br><span class="line">		head :head,</span><br><span class="line">		tail :tail,</span><br><span class="line">		capacity: capacity,</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> Cache</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 移除节点</span><br><span class="line">func (this *LRUCache) remove( node *ListDataNode)&#123;</span><br><span class="line">	node.pre.next = node.next</span><br><span class="line">	node.next.pre = node.pre</span><br><span class="line">    node.next = nil</span><br><span class="line">    node.pre = nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 插入头后面进入</span><br><span class="line">func (this *LRUCache) insertHead (node *ListDataNode)&#123;</span><br><span class="line">	head := this.head</span><br><span class="line">	node.next = head.next</span><br><span class="line">	node.pre = head</span><br><span class="line">	head.next.pre = node</span><br><span class="line">	head.next = node</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (this *LRUCache) Get(key int) int &#123;</span><br><span class="line">	<span class="keyword">if</span> node ,ok := this.dataMap[key];ok&#123;</span><br><span class="line">		this.remove(node)</span><br><span class="line">		this.insertHead(node)</span><br><span class="line">		<span class="built_in">return</span> node.data</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">return</span> -1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//把刚操作的放在最前面</span><br><span class="line">func (this *LRUCache) Put(key int, value int)  &#123;</span><br><span class="line">	<span class="keyword">if</span>  node ,ok := this.dataMap[key];ok&#123;</span><br><span class="line">		node.data = value</span><br><span class="line">		this.remove(node)</span><br><span class="line">		this.insertHead(node)</span><br><span class="line">		<span class="built_in">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> len(this.dataMap) &gt;= this.capacity&#123;</span><br><span class="line">		//队列满了先去掉队列尾巴把再插入</span><br><span class="line">		node := this.tail.pre</span><br><span class="line">		this.remove(node)</span><br><span class="line">		delete(this.dataMap,node.key)</span><br><span class="line">	&#125;</span><br><span class="line">	node := &amp;ListDataNode&#123;</span><br><span class="line">		data:value,</span><br><span class="line">		key:key,</span><br><span class="line">	&#125;</span><br><span class="line">	this.dataMap[key] = node</span><br><span class="line">	this.insertHead(node)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/03/golang%E9%9A%8F%E7%AC%94/workPool%E5%AE%9E%E7%8E%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="yvanli">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="yvanliUpdagre">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/03/golang%E9%9A%8F%E7%AC%94/workPool%E5%AE%9E%E7%8E%B0/" itemprop="url">workPool实现</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-03T19:07:12+08:00">
                2020-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="随手写了个workpool放上来"><a href="#随手写了个workpool放上来" class="headerlink" title="随手写了个workpool放上来"></a>随手写了个workpool放上来</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">package taskPool</span><br><span class="line"></span><br><span class="line">import (</span><br><span class="line">	&quot;golib&#x2F;errors&quot;</span><br><span class="line">	&quot;sync&#x2F;atomic&quot;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">type Task struct &#123;</span><br><span class="line">	Handler func(v ...interface&#123;&#125;)</span><br><span class="line">	Params[]interface&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Pool struct &#123;</span><br><span class="line">	capacity  uint64</span><br><span class="line">	runningWorkersNum  uint64</span><br><span class="line">	state  int64</span><br><span class="line">	taskC  chan *Task</span><br><span class="line">	closeC chan bool</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var ErrInvalidPoolkCap &#x3D; errors.New(&quot;invalid pool cap&quot;)</span><br><span class="line">const (</span><br><span class="line">	RUNNING &#x3D; 1</span><br><span class="line">	STOPED  &#x3D; 0</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">func NewPool (capacity uint64)(*Pool,error)&#123;</span><br><span class="line">	if capacity &lt;&#x3D; 0 &#123;</span><br><span class="line">		return nil,ErrInvalidPoolkCap</span><br><span class="line">	&#125;</span><br><span class="line">	return &amp;Pool&#123;</span><br><span class="line">		capacity:capacity,</span><br><span class="line">		state:RUNNING,</span><br><span class="line">		taskC:make(chan *Task,capacity),</span><br><span class="line">		closeC:make(chan bool),</span><br><span class="line">	&#125;,nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (p *Pool) addRunningkNum()&#123;</span><br><span class="line">	atomic.AddUint64(&amp;p.runningWorkersNum,1)</span><br><span class="line">&#125;</span><br><span class="line">func (p *Pool) reduceRunningNum()&#123;</span><br><span class="line">	atomic.AddUint64(&amp;p.runningWorkersNum,1)</span><br><span class="line">&#125;</span><br><span class="line">func (p *Pool) GetRunningNum()uint64&#123;</span><br><span class="line">	return  atomic.LoadUint64(&amp;p.runningWorkersNum)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (p *Pool) GetCap() uint64&#123;</span><br><span class="line">	return  atomic.LoadUint64(&amp;p.capacity)</span><br><span class="line">&#125;</span><br><span class="line">func (p *Pool) run()&#123;</span><br><span class="line">	p.addRunningkNum()</span><br><span class="line">	go func() &#123;</span><br><span class="line">		defer func() &#123;</span><br><span class="line">			p.reduceRunningNum()</span><br><span class="line">		&#125;()</span><br><span class="line">		for &#123;</span><br><span class="line">			select &#123;</span><br><span class="line">				case  task :&#x3D; &lt;- p.taskC:</span><br><span class="line">					task.Handler(task.Params)</span><br><span class="line">			     case &lt;-p.closeC:</span><br><span class="line">				return</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (p *Pool) Put (task *Task)error&#123;</span><br><span class="line">	if p.state &#x3D;&#x3D; STOPED&#123;</span><br><span class="line">		return ErrInvalidPoolkCap</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;容量不满再开一个携程处理</span><br><span class="line">	if p.runningWorkersNum &lt; p.GetCap()&#123;</span><br><span class="line">		p.run()</span><br><span class="line">	&#125;</span><br><span class="line">	&#x2F;&#x2F;放入任务</span><br><span class="line">	p.taskC &lt;- task</span><br><span class="line">	return nil</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (p *Pool) Clsoe()&#123;</span><br><span class="line">	p.state &#x3D; STOPED &#x2F;&#x2F;没有并发操作</span><br><span class="line">	&#x2F;&#x2F;等待任务消费完毕</span><br><span class="line">	for len(p.taskC) &gt; 0&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	p.closeC &lt;- true</span><br><span class="line">	close(p.taskC)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">yvanli</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%20%7C%7C%20archive">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yvanli</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
